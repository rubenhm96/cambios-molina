jQuery(document).ready(function(t){var e,a,i,n,l,o;t(".tips, .help_tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),t("p.form-field-author").on("click","a.change-author",function(){return t(this).closest("p").find(".current-author").hide(),t(this).closest("p").find(".change-author").show(),!1}),t.isFunction(t.fn.timepicker)&&t(".timepicker").timepicker({timeFormat:restaurant_listings_admin.time_format,noneOption:{label:restaurant_listings_admin.i18n_closed,value:restaurant_listings_admin.i18n_closed}}),t(document).on("click",".wp_restaurant_listings_add_another_file_button",function(e){e.preventDefault();var a=t(this).data("field_name"),i=t(this).data("field_placeholder"),n=t(this).data("uploader_button_text"),l=t(this).data("uploader_button"),o=t(this).data("view_button");t(this).before('<span class="file_url"><input type="text" name="'+a+'[]" placeholder="'+i+'" /><button class="button button-small wp_restaurant_listings_upload_file_button" data-uploader_button_text="'+n+'">'+l+'</button><button class="button button-small wp_restaurant_listings_view_file_button">'+o+"</button></span>")}),t(document).on("click",".wp_restaurant_listings_view_file_button",function(e){e.preventDefault(),i=t(this).closest(".file_url");var n=(a=i.find("input")).val();n.indexOf("://")>-1?window.open(n,"_blank"):(a.addClass("file_no_url"),setTimeout(function(){a.removeClass("file_no_url")},1e3))}),t(document).on("click",".wp_restaurant_listings_upload_file_button",function(n){n.preventDefault(),i=t(this).closest(".file_url"),a=i.find("input"),e?e.open():((e=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader_title"),button:{text:t(this).data("uploader_button_text")},multiple:!1})).on("select",function(){var i=e.state().get("selection").first().toJSON();t(a).val(i.url)}),e.open())});var s,r=t("#menu_files");t(document).on("click",".wp_restaurant_listings_add_another_menu_file_button",function(e){e.preventDefault();var a=t(this).data("field_name"),i=t(this).data("field_placeholder"),n=t(this).data("uploader_button_text"),l=t(this).data("uploader_button"),o=t(this).data("view_button");t(this).before('<span class="file_url"><input type="text" name="'+a+'[]" placeholder="'+i+'" /><button class="button button-small wp_restaurant_listings_upload_menu_file_button" data-uploader_button_text="'+n+'">'+l+'</button><button class="button button-small wp_restaurant_listings_view_menu_file_button">'+o+"</button></span>")}),t(document).on("click",".wp_restaurant_listings_view_menu_file_button",function(e){e.preventDefault(),o=t(this).closest(".file_url");var a=(l=o.find("input")).val();a.indexOf("://")>-1?window.open(a,"_blank"):(l.addClass("file_no_url"),setTimeout(function(){l.removeClass("file_no_url")},1e3))}),t(document).on("click",".wp_restaurant_listings_upload_menu_file_button",function(e){e.preventDefault(),o=t(this).closest(".file_url"),l=o.find("input"),n?n.open():((n=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader_title"),button:{text:t(this).data("uploader_button_text")},multiple:!1})).on("select",function(){var e=n.state().get("selection").first().toJSON(),a=n.state().get("selection"),i=r.val();a.map(function(t){(t=t.toJSON()).id&&(i=i?i+","+t.id:t.id)}),r.val(i),t(l).val(e.url)}),n.open())});var u=t("#restaurant_image_gallery"),c=t("#restaurant_images_container").find("ul.restaurant_images");t(".add_restaurant_images").on("click","a",function(e){var a=t(this);e.preventDefault(),s?s.open():((s=wp.media.frames.restaurant_gallery=wp.media({title:a.data("choose"),button:{text:a.data("update")},states:[new wp.media.controller.Library({title:a.data("choose"),filterable:"all",multiple:!0})]})).on("select",function(){var t=s.state().get("selection"),e=u.val();t.map(function(t){if((t=t.toJSON()).id){e=e?e+","+t.id:t.id;var i=t.sizes&&t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;c.append('<li class="image" data-attachment_id="'+t.id+'"><img src="'+i+'" /><ul class="actions"><li><a href="#" class="delete" title="'+a.data("delete")+'">'+a.data("text")+"</a></li></ul></li>")}}),u.val(e)}),s.open())}),t.isFunction(t.fn.sortable)&&c.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(){var e="";t("#restaurant_images_container").find("ul li.image").css("cursor","default").each(function(){var a=t(this).attr("data-attachment_id");e=e+a+","}),u.val(e)}}),t("#restaurant_images_container").on("click","a.delete",function(){t(this).closest("li.image").remove();var e="";return t("#restaurant_images_container").find("ul li.image").css("cursor","default").each(function(){var a=t(this).attr("data-attachment_id");e=e+a+","}),u.val(e),t("#tiptip_holder").removeAttr("style"),t("#tiptip_arrow").removeAttr("style"),!1})}),jQuery(document).ready(function(t){var e="restaurant_listings_type";t("#"+e+"checklist li :radio, #"+e+"checklist-pop :radio").live("click",function(){var a=t(this),i=a.is(":checked"),n=a.val();t("#"+e+"checklist li :radio, #"+e+"checklist-pop :radio").prop("checked",!1),t("#in-"+e+"-"+n+", #in-popular-"+e+"-"+n).prop("checked",i)})});